apiVersion: v1
kind: Namespace
metadata:
  labels:
    control-plane: dast-operator
    controller-tools.k8s.io: "1.0"
  name: system
---
apiVersion: v1
kind: Secret
metadata:
  name: webhook-secret
  namespace: system
type: kubernetes.io/tls
data:
  tls.crt: Q2VydGlmaWNhdGU6CiAgICBEYXRhOgogICAgICAgIFZlcnNpb246IDMgKDB4MikKICAgICAgICBTZXJpYWwgTnVtYmVyOiA2ICgweDYpCiAgICBTaWduYXR1cmUgQWxnb3JpdGhtOiBzaGE1MTJXaXRoUlNBRW5jcnlwdGlvbgogICAgICAgIElzc3VlcjogQz1VUywgQ049a2Fma2EtaGVhZGxlc3Mua2Fma2Euc3ZjLmNsdXN0ZXIubG9jYWwsIE89a2Fma2EKICAgICAgICBWYWxpZGl0eQogICAgICAgICAgICBOb3QgQmVmb3JlOiBKdWwgMTcgMDU6Mzg6MTUgMjAxOSBHTVQKICAgICAgICAgICAgTm90IEFmdGVyIDogSnVsIDE0IDA1OjM4OjE1IDIwMjkgR01UCiAgICAgICAgU3ViamVjdDogTz1rYWZrYSwgQ049a2Fma2EtaGVhZGxlc3Mua2Fma2Euc3ZjLmNsdXN0ZXIubG9jYWwKICAgICAgICBTdWJqZWN0IFB1YmxpYyBLZXkgSW5mbzoKICAgICAgICAgICAgUHVibGljIEtleSBBbGdvcml0aG06IHJzYUVuY3J5cHRpb24KICAgICAgICAgICAgICAgIFB1YmxpYy1LZXk6ICgyMDQ4IGJpdCkKICAgICAgICAgICAgICAgIE1vZHVsdXM6CiAgICAgICAgICAgICAgICAgICAgMDA6YjM6MDE6YjM6ZmM6Y2M6MTU6MmE6MTA6YmQ6Y2M6YjM6ZGQ6MzY6MTk6CiAgICAgICAgICAgICAgICAgICAgMTU6ZTc6ZjA6MjQ6Y2Y6MWE6MDg6ZmY6N2I6Yjc6Zjg6YWQ6NWE6NmU6OTY6CiAgICAgICAgICAgICAgICAgICAgODc6YTI6Zjg6NTM6MWI6MDE6ZjU6NWE6YjE6Nzk6ZDU6Zjc6ZmE6ZjU6Zjk6CiAgICAgICAgICAgICAgICAgICAgOWY6NjI6N2Q6OWQ6ZDU6NmI6ODI6MmY6YzE6OTg6ZTY6Njg6ZDA6Mzg6OWY6CiAgICAgICAgICAgICAgICAgICAgMzY6ZjM6MGY6OWE6ZDM6ZmI6ZjM6ODM6NzY6ZmU6NzQ6YjQ6ZDI6ODU6MTg6CiAgICAgICAgICAgICAgICAgICAgMzU6MzU6NzQ6ZWU6YTM6NzM6OTg6NGQ6ZDE6YzE6ODE6MWE6ZTQ6ODg6YzU6CiAgICAgICAgICAgICAgICAgICAgNDc6NzA6ODI6ZDI6OTI6ZDA6YjI6MmE6NDI6M2U6Zjg6NTE6MTY6NzA6ZGQ6CiAgICAgICAgICAgICAgICAgICAgOWQ6YTQ6ZmU6Zjk6MjE6YTY6NjA6MDU6NTE6Y2Q6MGU6ODM6OWQ6NTA6N2E6CiAgICAgICAgICAgICAgICAgICAgMTE6Y2Y6Yjc6MzQ6MmM6M2M6NDg6NjY6YmU6YTA6MWU6NTQ6NjQ6NDE6NDg6CiAgICAgICAgICAgICAgICAgICAgYWU6MTM6YmE6MjY6MzQ6ZWY6Zjg6ZTk6MjA6OTc6NmQ6MTI6MDU6YzY6NjE6CiAgICAgICAgICAgICAgICAgICAgYTQ6ZmQ6ZDE6MjU6ZjY6ODE6NDI6ZWE6OWM6ZGU6ODg6MGI6Y2E6OTI6MzQ6CiAgICAgICAgICAgICAgICAgICAgOTM6Nzc6NmU6NWM6MGM6YjY6NmQ6ZmE6ZWU6YmE6MTA6MTE6MTg6ZjQ6OTI6CiAgICAgICAgICAgICAgICAgICAgZDQ6MWE6YjM6MWU6ZTA6Yzc6ZDg6NjY6YmI6NTE6NjE6YTM6MmM6MTM6ODk6CiAgICAgICAgICAgICAgICAgICAgNWU6YmM6Zjc6YWM6ZjI6NzE6OTM6Y2I6MTk6Yzk6YWY6ZDQ6NzA6N2Y6MjI6CiAgICAgICAgICAgICAgICAgICAgM2Y6OWE6YjE6YmM6MGE6YWM6OWQ6Njk6ZWY6YzY6NGI6MmQ6NWE6Yzc6MmM6CiAgICAgICAgICAgICAgICAgICAgMmY6MGQ6MzY6ZjU6NzE6ZTc6ODE6NTE6ZTE6MjA6YzA6NzU6OTk6NzI6MTE6CiAgICAgICAgICAgICAgICAgICAgNmY6NGM6OWE6ODU6N2Q6N2I6Nzc6NDA6NTA6NDI6YzE6NWI6YTA6ODY6Zjg6CiAgICAgICAgICAgICAgICAgICAgOWQ6NTUKICAgICAgICAgICAgICAgIEV4cG9uZW50OiA2NTUzNyAoMHgxMDAwMSkKICAgICAgICBYNTA5djMgZXh0ZW5zaW9uczoKICAgICAgICAgICAgWDUwOXYzIEJhc2ljIENvbnN0cmFpbnRzOiAKICAgICAgICAgICAgICAgIENBOkZBTFNFCiAgICAgICAgICAgIFg1MDl2MyBFeHRlbmRlZCBLZXkgVXNhZ2U6IAogICAgICAgICAgICAgICAgVExTIFdlYiBDbGllbnQgQXV0aGVudGljYXRpb24sIFRMUyBXZWIgU2VydmVyIEF1dGhlbnRpY2F0aW9uCiAgICAgICAgICAgIFg1MDl2MyBLZXkgVXNhZ2U6IAogICAgICAgICAgICAgICAgRGlnaXRhbCBTaWduYXR1cmUsIEtleSBFbmNpcGhlcm1lbnQKICAgICAgICAgICAgWDUwOXYzIFN1YmplY3QgQWx0ZXJuYXRpdmUgTmFtZTogCiAgICAgICAgICAgICAgICBETlM6d2ViaG9vay1zZXJ2aWNlLnN5c3RlbS5zdmMuY2x1c3Rlci5sb2NhbCwgRE5TOndlYmhvb2stc2VydmljZS5zeXN0ZW0uc3ZjLCBETlM6d2ViaG9vay1zZXJ2aWNlCiAgICBTaWduYXR1cmUgQWxnb3JpdGhtOiBzaGE1MTJXaXRoUlNBRW5jcnlwdGlvbgogICAgICAgICBiYzpkZDo5MToxNTo1Njo5ZTpiYzplZTphOTpmZjo1MjoyNzozNTpjMDo4MzozNjpkMzpjNDoKICAgICAgICAgNjc6ZWM6MmM6Mzk6Zjc6M2Q6ZTc6NTQ6NWM6N2Q6NzM6NTI6MGU6YWY6YjY6NjM6MmU6NWY6CiAgICAgICAgIDZlOjFiOjE4OmVmOjU1OjU1OjUzOjViOmQ0OjA2OmJhOjMyOmNjOjAzOmM5OjliOmE4OjQ4OgogICAgICAgICBjMTo4MzpmZDoyZDo3ZTphYzpmNzoxYTpmZTpiOTpiYjphZjo3YzoyNzozYjpiMjo0YjowODoKICAgICAgICAgYWM6OTQ6MzI6ZWY6YmE6MTE6NzQ6MjU6ODI6NjQ6MmI6MGU6ZjQ6Y2M6ODU6OGM6ZmE6NjA6CiAgICAgICAgIDM5OmUyOjE3OjJhOjAxOjNiOjgwOjlhOmUzOmZkOjA0OjAwOmJmOmEwOjQzOjgxOjEyOmM2OgogICAgICAgICAyZDpmZDowNTo0Njo2ZDoxNDoyNjpjZDo4NTpkMTpkOTozNTpjMDpjZjoxMTplOToxNjowNjoKICAgICAgICAgZDk6Mjc6NDU6ZjQ6Zjk6MDA6OTE6YjU6ZWE6N2E6YjE6NzQ6MzE6YTE6MTI6Y2Y6ZWM6MTU6CiAgICAgICAgIGIyOmIwOjA4OmE2OmJlOmQ2OjVjOmE3Ojk3OjcwOmMyOmI3OmI5OmJkOjAxOmYyOjE3OjI3OgogICAgICAgICA3ZDowMDpjMzozYzpiNzplNzo2YTo3Yjo0NDo0YjowMDpjNDo3Mjo3YTpjODoxMTo3MDo4YToKICAgICAgICAgNzI6NzM6Y2U6NzY6Mzc6NGU6OWI6NTY6ZjY6MWY6NzY6ODA6ODA6YzY6MmE6MjM6Yjk6YzQ6CiAgICAgICAgIDE2OjI0OmI4OjE5OjdiOmYwOjJhOmVjOjYyOjhjOmI1OjAzOjg4OjczOmE2OmJjOjFlOjRlOgogICAgICAgICA2MDowNzowYTpkYzpiYjplNDo1MDo0NTplYjpkMjoyMDplZTo1YTo5Yjo2NTo1ZjoxMTo2ODoKICAgICAgICAgNWY6N2Q6YmU6OWI6NWU6NGY6NmQ6NjY6MjU6ZTc6YzE6NWM6MmQ6ZDE6OTA6OWY6NzM6MDI6CiAgICAgICAgIGM5OjljOjBmOmM5Ci0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlEcHpDQ0FvK2dBd0lCQWdJQkJqQU5CZ2txaGtpRzl3MEJBUTBGQURCT01Rc3dDUVlEVlFRR0V3SlZVekV2Ck1DMEdBMVVFQXd3bWEyRm1hMkV0YUdWaFpHeGxjM011YTJGbWEyRXVjM1pqTG1Oc2RYTjBaWEl1Ykc5allXd3gKRGpBTUJnTlZCQW9NQld0aFptdGhNQjRYRFRFNU1EY3hOekExTXpneE5Wb1hEVEk1TURjeE5EQTFNemd4TlZvdwpRVEVPTUF3R0ExVUVDZ3dGYTJGbWEyRXhMekF0QmdOVkJBTU1KbXRoWm10aExXaGxZV1JzWlhOekxtdGhabXRoCkxuTjJZeTVqYkhWemRHVnlMbXh2WTJGc01JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0MKQVFFQXN3R3ovTXdWS2hDOXpMUGROaGtWNS9Ba3p4b0kvM3UzK0sxYWJwYUhvdmhUR3dIMVdyRjUxZmY2OWZtZgpZbjJkMVd1Q0w4R1k1bWpRT0o4Mjh3K2EwL3Z6ZzNiK2RMVFNoUmcxTlhUdW8zT1lUZEhCZ1Jya2lNVkhjSUxTCmt0Q3lLa0krK0ZFV2NOMmRwUDc1SWFaZ0JWSE5Eb09kVUhvUno3YzBMRHhJWnI2Z0hsUmtRVWl1RTdvbU5PLzQKNlNDWGJSSUZ4bUdrL2RFbDlvRkM2cHplaUF2S2tqU1RkMjVjRExadCt1NjZFQkVZOUpMVUdyTWU0TWZZWnJ0UgpZYU1zRTRsZXZQZXM4bkdUeXhuSnI5UndmeUkvbXJHOENxeWRhZS9HU3kxYXh5d3ZEVGIxY2VlQlVlRWd3SFdaCmNoRnZUSnFGZlh0M1FGQkN3VnVnaHZpZFZRSURBUUFCbzRHY01JR1pNQWtHQTFVZEV3UUNNQUF3SFFZRFZSMGwKQkJZd0ZBWUlLd1lCQlFVSEF3SUdDQ3NHQVFVRkJ3TUJNQXNHQTFVZER3UUVBd0lGb0RCZ0JnTlZIUkVFV1RCWApnaWgzWldKb2IyOXJMWE5sY25acFkyVXVjM2x6ZEdWdExuTjJZeTVqYkhWemRHVnlMbXh2WTJGc2docDNaV0pvCmIyOXJMWE5sY25acFkyVXVjM2x6ZEdWdExuTjJZNElQZDJWaWFHOXZheTF6WlhKMmFXTmxNQTBHQ1NxR1NJYjMKRFFFQkRRVUFBNElCQVFDODNaRVZWcDY4N3FuL1VpYzF3SU0yMDhSbjdDdzU5ejNuVkZ4OWMxSU9yN1pqTGw5dQpHeGp2VlZWVFc5UUd1akxNQThtYnFFakJnLzB0ZnF6M0d2NjV1Njk4Snp1eVN3aXNsREx2dWhGMEpZSmtLdzcwCnpJV00rbUE1NGhjcUFUdUFtdVA5QkFDL29FT0JFc1l0L1FWR2JSUW16WVhSMlRYQXp4SHBGZ2JaSjBYMCtRQ1IKdGVwNnNYUXhvUkxQN0JXeXNBaW12dFpjcDVkd3dyZTV2UUh5RnlkOUFNTTh0K2RxZTBSTEFNUnllc2dSY0lweQpjODUyTjA2YlZ2WWZkb0NBeGlvanVjUVdKTGdaZS9BcTdHS010UU9JYzZhOEhrNWdCd3JjdStSUVJldlNJTzVhCm0yVmZFV2hmZmI2YlhrOXRaaVhud1Z3dDBaQ2Zjd0xKbkEvSgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2d0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktrd2dnU2xBZ0VBQW9JQkFRQ3pBYlA4ekJVcUVMM00KczkwMkdSWG44Q1RQR2dqL2U3ZjRyVnB1bG9laStGTWJBZlZhc1huVjkvcjErWjlpZlozVmE0SXZ3WmptYU5BNApuemJ6RDVyVCsvT0RkdjUwdE5LRkdEVTFkTzZqYzVoTjBjR0JHdVNJeFVkd2d0S1MwTElxUWo3NFVSWnczWjJrCi92a2hwbUFGVWMwT2c1MVFlaEhQdHpRc1BFaG12cUFlVkdSQlNLNFR1aVkwNy9qcElKZHRFZ1hHWWFUOTBTWDIKZ1VMcW5ONklDOHFTTkpOM2Jsd010bTM2N3JvUUVSajBrdFFhc3g3Z3g5aG11MUZob3l3VGlWNjg5Nnp5Y1pQTApHY212MUhCL0lqK2FzYndLckoxcDc4WkxMVnJITEM4Tk52Vng1NEZSNFNEQWRabHlFVzlNbW9WOWUzZEFVRUxCClc2Q0crSjFWQWdNQkFBRUNnZ0VBV0s2N1VMNTZyY0JsaDRpRVMwemFRWElEaW1iSGxtcmdsZDZzTXFWNHhSQnAKZTdQWXJmbkc5bTVJY3B3Y2psclZXdXBNTVFTa2oySFY1bmRhYmNpSldBUTJmQ2J6b1RZRUpkUDhhR05wNXFoYQpDQk9tM2lOSW5VbS9Qc3BSTUZNY01UdG9udlR0UFRWTjZIUTVVS1p3WTdKRytLM1R2Zzc3ekFCalpKYm85NTBiCi8xb3FBQ25hS0ptOVgxSklIYVYzWWNPbWRRbEhVdUU1OGU2VG1Ody8vbEdGU1hPYWtpUzVuWmZsb1V5QzA3UDYKS1ZCRGp2Q0JnTkJBb2UyUko3TWtJZ0ZoTE1oSGRHUW9SWHlYbzFYcys0bFJQbjkvUFhuMUV6KzN1Wk10RjY0SgoxK1YwUFpjTmgzNW9ybG8zOVBTVmc5V051ZTEzQVRpMkNoYkhzcXZYZ1FLQmdRRHJUYTRSS0ltcjZtWmNmbGRnCkFPRWN6eEZCMDAyOVpMb2Q1eDlzaDZaYmNtY3BDbFVsT2pEcncySUVuVUd0QndmZ2lIQ29HS0lKKy9QOHlLcmsKWWV1dExTOXRBRUxPSzhMQm5wNXFRNnBqbURsakpTTTJEanJ1NVlFT24xV1RSNUtETk1MTURxV0F3VHN0Wkh1bQpQcGVUUVh3d3FaUmd0L0dNQzVPRi9WcWNMUUtCZ1FEQ3dHUGtzVlRzNG80ZWV5WDFXUXl4aUQrM0MzV1R6RjRkCkFpblFCU3I4WE1CREZJOWlsbS9uQ3dkZVdYYmwzTXZ0Q055blZMS2VuUGZ0UXc2NjI2cG9qN1BXRDRRTDN3aXIKYm1RZXJJM1dJNktXTVR6clA5VTZ1cVF2Q1FSYW9yM0ZhSDhxNkx4QTJqcUhQUXVvRlJHQ2lINEtCWjAzaUZjMgptL0hvOG55MnlRS0JnUUN0VFEwQ3ZpU0haWi8yUjJiNjRpcnFHT2ZRMzF2R1BjV0YrSStBVTNnR3FmK29qbCtmCmgzZzRiREpveTVsdllsbysyTDZBVDRRb2JsU0l2UktBR2s2RndWM0luZ1NWN0UwSVpWYXZWUjdOTTNRd3ZVMXQKcHBWcEZjY3ppYzV4SnFtVjBPb1hlRUlVemp4VGRrcExhcFlnY242UktKU0xsMjVqZ3JNb1lDeTRFUUtCZ1FDaAprVDdPWVpmVkZuZFZMbEZsWkVVMW01VlFaRDlkS0hVRGwrSGNaQTB2WkR0VTYxK3hLS0VaaW5ySWVXdzhjcHJ6CndTQmQ2ZFJ0NWtlQkhOckJocSt2STFqTXcvNkdZcmdza042YTNBaW5tTlN2eVpXQ2pXaDIycFNQT09uVno2R2sKZm5iUndGYzliazZVRjc3dDZOeW44Rml3TTh3a1lBWUtsZ0Z4Z29xWWtRS0JnUUNyUTZCc1QxQ1U2aGdvRDFGcwpGVG1HUkxDaGM4a0c4NVJwTWRNcjBLak5Gc1hxN0t3TzFiU0ZNa0lndVBWdGt1ZnJPN0dVczlRZDNvUzRzY0FJCkRtc0hrZ20zQTNnOGNCTDhXRTU3K2xyeStFQWtQV0FrTWR1ZFhWcmM3a2E4TUMrYXFnZUNaRUNZUUQvejNkQTkKS2tWZ2pxWWtzWCtySzUyZzBkbUVVSVR4WXc9PQotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tCg==
---
apiVersion: v1
kind: Service
metadata:
  name: dast-operator-service
  namespace: system
  labels:
    control-plane: dast-operator
    controller-tools.k8s.io: "1.0"
spec:
  selector:
    control-plane: dast-operator
    controller-tools.k8s.io: "1.0"
  ports:
  - port: 443
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: dast-operator
  namespace: system
  labels:
    control-plane: dast-operator
    controller-tools.k8s.io: "1.0"
spec:
  selector:
    matchLabels:
      control-plane: dast-operator
      controller-tools.k8s.io: "1.0"
  serviceName: dast-operator-service
  replicas: 1
  podManagementPolicy: Parallel
  template:
    metadata:
      labels:
        control-plane: dast-operator
        controller-tools.k8s.io: "1.0"
    spec:
      volumes:
        - name: webhook-certs
          secret:
            secretName: webhook-secret
      containers:
      - command:
        - /dast-operator
        image: banzaicloud/dast-operator:latest
        imagePullPolicy: IfNotPresent
        name: manager
        resources:
          limits:
            cpu: 100m
            memory: 30Mi
          requests:
            cpu: 100m
            memory: 20Mi
        volumeMounts:
          - name: webhook-certs
            mountPath: /etc/webhook/certs
            readOnly: true
        ports:
          - containerPort: 8443
      terminationGracePeriodSeconds: 10
